module.exports = {
  calculate: function(req, res, next){
    let CPI = {
      1913: 9.9,
      1914: 10,
      1915: 10.1,
      1916: 10.9,
      1917: 12.8,
      1918: 15.1,
      1919: 17.3,
      1920: 20,
      1921: 17.9,
      1922: 16.8,
      1923: 17.1,
      1924: 17.1,
      1925: 17.5,
      1926: 17.7,
      1927: 17.4,
      1928: 17.1,
      1929: 17.1,
      1930: 16.7,
      1931: 15.2,
      1932: 13.7,
      1933: 13,
      1934: 13.4,
      1935: 13.7,
      1936: 13.9,
      1937: 14.4,
      1938: 14.1,
      1939: 13.9,
      1940: 14,
      1941: 14.7,
      1942: 16.3,
      1943: 17.3,
      1944: 17.6,
      1945: 18,
      1946: 19.5,
      1947: 22.3,
      1948: 24.1,
      1949: 23.8,
      1950: 24.08,
      1951: 25.98,
      1952: 26.55,
      1953: 26.75,
      1954: 26.88,
      1955: 26.78,
      1956: 27.18,
      1957: 28.15,
      1958: 28.92,
      1959: 29.16,
      1960: 29.62,
      1961: 29.92,
      1962: 30.26,
      1963: 30.62,
      1964: 31.03,
      1965: 31.56,
      1966: 32.46,
      1967: 33.4,
      1968: 34.8,
      1969: 36.67,
      1970: 38.84,
      1971: 40.51,
      1972: 41.85,
      1973: 44.45,
      1974: 49.33,
      1975: 53.84,
      1976: 56.94,
      1977: 60.61,
      1978: 65.22,
      1979: 72.57,
      1980: 82.38,
      1981: 90.93,
      1982: 96.5,
      1983: 99.6,
      1984: 103.9,
      1985: 107.6,
      1986: 109.6,
      1987: 113.6,
      1988: 118.3,
      1989: 124,
      1990: 130.7,
      1991: 136.2,
      1992: 140.3,
      1993: 144.5,
      1994: 148.2,
      1995: 152.4,
      1996: 156.9,
      1997: 160.5,
      1998: 163,
      1999: 166.6,
      2000: 172.2,
      2001: 177.1,
      2002: 179.9,
      2003: 184,
      2004: 188.9,
      2005: 195.3,
      2006: 201.6,
      2007: 207.34,
      2008: 215.3,
      2009: 214.54,
      2010: 218.06,
      2011: 224.94,
      2012: 229.59,
      2013: 232.96,
      2014: 236.74,
      2015: 237.02,
      2016: 241.04
    }

    // targetDate (target), value (value)
    let targetDate     = Number.parseInt(req.query.target);
    let value          = Number.parseFloat(req.query.value);
    let responseObject = {}

    responseObject["adjustedValue"] = Number.parseFloat(
      (value * CPI[2016]/CPI[targetDate]).toFixed(2)
    )

    res.inflationAdjusted = {response: responseObject}
    next()
  }
}
